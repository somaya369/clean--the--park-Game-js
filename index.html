<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clean the Park!</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Clean the Park!</h1>
<div id="bin">🗑️</div>
<div id="hud">
  <span id="level"></span> | 
  <span id="score"></span> | 
  <span id="timer"></span> | 
  <span id="lives"></span>
</div>
<div id="message"></div>
<div id="endGameMessage"></div>
<button id="restartBtn">Restart Game</button>

<div id="startScreen">
  <h1>Welcome to Clean the Park! 🌳</h1>
  <p>Collect trash and make the park clean.</p>
  <button id="startBtn">Start Game</button>
</div>

<script>
let level, trashCount, recycled, score, timeLeft, timerInterval, lives;
const maxLevel = 5;
const trashTypes = ["🍌","🍕","💩","🥑","🤡","🍎","🍬"];
const bin = document.getElementById("bin");
const message = document.getElementById("message");
const levelDisplay = document.getElementById("level");
const scoreDisplay = document.getElementById("score");
const timerDisplay = document.getElementById("timer");
const livesDisplay = document.getElementById("lives");
const endGameMessage = document.getElementById("endGameMessage");
const restartBtn = document.getElementById("restartBtn");
const startScreen = document.getElementById("startScreen");
const startBtn = document.getElementById("startBtn");

// Voice and sound effects
const startSound = new Audio("voice/game-start-6104.mp3");
const trashSound = new Audio("voice/mixkit-retro-game-notification-212 (2).wav");
const levelUpSound = new Audio("voice/mixkit-quick-win-video-game-notification-269.wav");
const winSound = new Audio("voice/victory-chime-366449.mp3");
const loseSound = new Audio("voice/mixkit-arcade-retro-game-over-213.wav");

startBtn.addEventListener('click', ()=>{ startScreen.style.display="none"; startSound.play(); startGame(); });
restartBtn.addEventListener('click', ()=>{ resetGame(); startGame(); startSound.play(); });

function startGame(){
  level=1; trashCount=3; recycled=0; score=0; timeLeft=60; lives=3;
  updateDisplays(); message.textContent="Grab the trash and throw it into the bin!";
  bin.style.display="block"; endGameMessage.style.display="none"; restartBtn.style.display="none";
  createTrash(trashCount); startTimer();
}

function startTimer(){
  clearInterval(timerInterval);
  timerInterval=setInterval(()=>{
    timeLeft--; updateDisplays();
    if(timeLeft<=0) loseLife();
  },1000);
}

function createTrash(num){
  document.querySelectorAll(".trash").forEach(t=>t.remove());
  for(let i=0;i<num;i++){
    const trash=document.createElement("div");
    trash.classList.add("trash");
    trash.textContent=trashTypes[Math.floor(Math.random()*trashTypes.length)];
    trash.style.left=Math.random()*80+"vw";
    trash.style.top=Math.random()*60+"vh";
    trash.draggable=true;

    trash.addEventListener("dragstart", e=>{ e.dataTransfer.setData("text/plain","trash"); trash.dataset.dragging="true"; });
    trash.addEventListener("touchstart", ()=>trash.dataset.dragging="true");
    trash.addEventListener("touchmove", e=>{ const t=e.touches[0]; trash.style.left=(t.clientX-20)+"px"; trash.style.top=(t.clientY-20)+"px"; });
    trash.addEventListener("touchend", ()=>{
      const binRect=bin.getBoundingClientRect(); const trashRect=trash.getBoundingClientRect();
      if(trashRect.left<binRect.right && trashRect.right>binRect.left && trashRect.top<binRect.bottom && trashRect.bottom>binRect.top){
        collectTrash(trash);
      }
    });
    document.body.appendChild(trash);
  }
}

bin.addEventListener("dragover", e=>e.preventDefault());
bin.addEventListener("drop", e=>{ e.preventDefault(); const dragging=document.querySelector(".trash[data-dragging='true']"); if(dragging) collectTrash(dragging); });

function collectTrash(trash){
  let extra=10; if(trash.textContent==="🍎") extra=20; if(trash.textContent==="💩") extra=-10;
  trash.classList.add("collected");
  setTimeout(()=>trash.remove(),300);
  recycled++; score+=extra; trashSound.play();
  message.textContent="Collected! +" + extra + " points ⭐";
  updateDisplays();

  if(recycled===trashCount){ if(timeLeft>10) score+=20;
    setTimeout(()=>{ levelUpSound.play(); nextLevel(); },600);
  }
}

function nextLevel(){
  level++; recycled=0; trashCount+=2; timeLeft=30-level*3; if(timeLeft<10) timeLeft=10;
  if(level>maxLevel){ endGame("🎉 Congratulations! The park is clean."); return; }
  message.textContent="Next Level! Collect more trash!";
  createTrash(trashCount); updateDisplays(); startTimer();
}

function loseLife(){ lives--; if(lives<=0) endGame("💀 No lives left! Game Over."); else { message.textContent="⏰ Time’s up! You lost a life."; recycled=0; createTrash(trashCount); timeLeft=25; startTimer(); updateDisplays(); } }

function endGame(msg){
  clearInterval(timerInterval); bin.style.display="none"; document.querySelectorAll(".trash").forEach(t=>t.remove());
  endGameMessage.textContent=msg + " Final Score: "+score; endGameMessage.style.display="block"; restartBtn.style.display="inline-block";
  if(msg.includes("Congratulations")) winSound.play(); else if(msg.includes("Game Over")) loseSound.play();
}

function resetGame(){ level=1; score=0; timeLeft=30; lives=3; recycled=0; createTrash(trashCount); updateDisplays(); startTimer(); }

function updateDisplays(){ levelDisplay.textContent="Level: "+level; scoreDisplay.textContent="⭐ Score: "+score; timerDisplay.textContent="⏱️ "+timeLeft+"s"; livesDisplay.textContent="❤️ "+lives; }
function collectTrash(trash){
  let extra=10; 
  if(trash.textContent==="🍎") extra=20; 
  if(trash.textContent==="💩") extra=-10;

 
  bin.classList.add("hovered");
  setTimeout(()=>bin.classList.remove("hovered"), 300); 

  trash.classList.add("collected");
  setTimeout(()=>trash.remove(),300);
  recycled++; score+=extra;
  trashSound.play();
  message.textContent="Collected! +" + extra + " points ⭐";
  updateDisplays();

  if(recycled===trashCount){ 
    if(timeLeft>10) score+=20;
    setTimeout(()=>{ levelUpSound.play(); nextLevel(); },600);
  }
}


</script>
</body>
</html>
